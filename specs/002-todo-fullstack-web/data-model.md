# Data Model: Todo Full-Stack Web Application

## Entity: User (Managed by Better Auth)

Represents a registered user of the application. Better Auth manages user creation, authentication, and session handling. The backend only reads user identity from JWT tokens.

### Attributes

- **id**: `string` — Primary key, generated by Better Auth (UUID format)
- **email**: `string` — Unique, required, used for authentication
- **name**: `string` — Display name, required at signup
- **created_at**: `timestamp` — Auto-set when account is created

### Relationships

- A User **has many** Tasks (one-to-many)

### Notes

- The User table is managed entirely by Better Auth on the frontend/auth layer
- The backend does NOT create or modify users — it only verifies JWT tokens containing user_id
- User data in the backend is referenced only via `user_id` foreign key in the Task table

---

## Entity: Task

Represents a todo item owned by a specific user. This is the core entity of the application.

### Attributes

- **id**: `integer` — Primary key, auto-increment, unique
- **user_id**: `string` — Foreign key referencing User.id, required, not null
- **title**: `string` — Required, 1-200 characters, not null, must not be blank/whitespace-only
- **description**: `text` — Optional, max 1000 characters, nullable
- **completed**: `boolean` — Default `false`, indicates task completion status
- **priority**: `enum(string)` — One of: `"high"`, `"medium"`, `"low"`. Default: `"medium"`
- **tags**: `array of strings` — Default empty array `[]`. User-defined labels (e.g., "work", "home", "personal")
- **created_at**: `timestamp` — Auto-set on creation, not editable
- **updated_at**: `timestamp` — Auto-set on creation, auto-updated on every modification

### Relationships

- A Task **belongs to** one User (many-to-one via `user_id`)

### Validation Rules

- `id` must be a positive integer (auto-generated)
- `user_id` must be a non-empty string matching the authenticated user
- `title` must be a non-empty string between 1 and 200 characters (trimmed of leading/trailing whitespace)
- `description` if provided, must be at most 1000 characters
- `completed` must be a boolean value
- `priority` must be one of: `"high"`, `"medium"`, `"low"`
- `tags` must be an array of strings; each tag should be non-empty and trimmed

### Indexes

- `tasks.user_id` — For efficient filtering of tasks by user
- `tasks.completed` — For status-based filtering
- `tasks.priority` — For priority-based filtering and sorting
- `tasks.created_at` — For date-based sorting

### Example (Conceptual)

```python
class Task(SQLModel, table=True):
    id: int | None = Field(default=None, primary_key=True)
    user_id: str = Field(index=True, nullable=False)
    title: str = Field(max_length=200, nullable=False)
    description: str | None = Field(default=None, max_length=1000)
    completed: bool = Field(default=False)
    priority: str = Field(default="medium")  # "high", "medium", "low"
    tags: list[str] = Field(default=[], sa_column=Column(JSON))
    created_at: datetime = Field(default_factory=datetime.utcnow)
    updated_at: datetime = Field(default_factory=datetime.utcnow)
```
